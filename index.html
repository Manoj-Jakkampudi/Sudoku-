<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sudoku Game</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Arial', sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }
  
  .game-container {
    background: white;
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    max-width: 500px;
    width: 100%;
  }
  
  .game-header {
    text-align: center;
    margin-bottom: 20px;
  }
  
  .game-header h1 {
    color: #2c3e50;
    font-size: 2.5em;
    margin-bottom: 5px;
    font-weight: bold;
  }
  
  .game-header p {
    color: #7f8c8d;
    font-size: 1.1em;
  }
  
  .game-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 15px;
    flex-wrap: wrap;
    gap: 10px;
  }
  
  .timer-container {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .timer {
    font-size: 1.2em;
    font-weight: bold;
    color: #2c3e50;
    background: white;
    padding: 8px 15px;
    border-radius: 20px;
    border: 2px solid #e9ecef;
    min-width: 100px;
    text-align: center;
  }
  
  .timer.paused {
    background: #fff3cd;
    border-color: #ffeaa7;
    color: #856404;
  }
  
  .pause-btn {
    padding: 8px 16px;
    border: 2px solid #6c757d;
    background: white;
    color: #6c757d;
    border-radius: 20px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
  }
  
  .pause-btn:hover {
    background: #6c757d;
    color: white;
  }
  
  .pause-btn.paused {
    background: #28a745;
    border-color: #28a745;
    color: white;
  }
  
  .difficulty {
    display: flex;
    gap: 8px;
  }
  
  .difficulty-btn {
    padding: 8px 15px;
    border: 2px solid #dee2e6;
    background: white;
    color: #6c757d;
    border-radius: 20px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
  }
  
  .difficulty-btn.active {
    background: #007bff;
    border-color: #007bff;
    color: white;
  }
  
  .difficulty-btn:hover {
    transform: translateY(-2px);
  }
  
  /* Exact Sudoku Grid Structure */
  .sudoku-grid-container {
    position: relative;
    margin-bottom: 25px;
  }
  
  .sudoku-grid {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    background: #2c3e50;
    border: 4px solid #2c3e50;
    border-radius: 8px;
    overflow: hidden;
  }
  
  .cell {
    aspect-ratio: 1;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.4em;
    font-weight: bold;
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
    user-select: none;
  }
  
  /* Thick borders for 3x3 boxes - Exact Sudoku structure */
  .cell {
    border: 1px solid #bdc3c7;
  }
  
  /* Vertical thick borders */
  .cell:nth-child(3n) {
    border-right: 3px solid #2c3e50;
  }
  
  .cell:nth-child(9n) {
    border-right: 1px solid #bdc3c7;
  }
  
  /* Horizontal thick borders */
  .cell:nth-child(n+19):nth-child(-n+27),
  .cell:nth-child(n+46):nth-child(-n+54) {
    border-bottom: 3px solid #2c3e50;
  }
  
  /* Outer borders */
  .cell:nth-child(-n+9) {
    border-top: 3px solid #2c3e50;
  }
  
  .cell:nth-child(9n+1) {
    border-left: 3px solid #2c3e50;
  }
  
  .cell:nth-child(n+73) {
    border-bottom: 3px solid #2c3e50;
  }
  
  .cell:nth-child(n+1):nth-child(-n+9) {
    border-top: 3px solid #2c3e50;
  }
  
  .cell.fixed {
    background: #f8f9fa;
    color: #2c3e50;
    font-weight: 700;
  }
  
  .cell.selected {
    background: #d1ecff;
    transform: scale(1.03);
    z-index: 2;
    box-shadow: 0 0 0 2px #007bff;
  }
  
  .cell.highlighted {
    background: #e8f4ff;
  }
  
  .cell.invalid {
    background: #ffeaea;
    color: #dc3545;
  }
  
  .cell.error-dot::after {
    content: '';
    position: absolute;
    top: 5px;
    right: 5px;
    width: 6px;
    height: 6px;
    background: #dc3545;
    border-radius: 50%;
  }
  
  .controls-section {
    margin-bottom: 20px;
  }
  
  .number-pad {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin-bottom: 20px;
  }
  
  .number-btn {
    padding: 15px;
    border: 2px solid #007bff;
    background: white;
    color: #007bff;
    border-radius: 12px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .number-btn:hover {
    background: #007bff;
    color: white;
    transform: translateY(-2px);
  }
  
  .number-btn.clear {
    border-color: #dc3545;
    color: #dc3545;
  }
  
  .number-btn.clear:hover {
    background: #dc3545;
    color: white;
  }
  
  .action-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
  }
  
  .action-btn {
    padding: 12px 25px;
    border: none;
    border-radius: 12px;
    font-size: 1em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .action-btn.new-game {
    background: #28a745;
    color: white;
  }
  
  .action-btn.new-game:hover {
    background: #218838;
    transform: translateY(-2px);
  }
  
  .action-btn.check {
    background: #ffc107;
    color: #212529;
  }
  
  .action-btn.check:hover {
    background: #e0a800;
    transform: translateY(-2px);
  }
  
  .message {
    text-align: center;
    margin-top: 15px;
    padding: 12px;
    border-radius: 8px;
    font-weight: bold;
    min-height: 24px;
  }
  
  .message.success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
  }
  
  .message.error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
  }
  
  .controls-guide {
    text-align: center;
    margin-top: 15px;
    color: #6c757d;
    font-size: 0.9em;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 8px;
  }
  
  .game-paused-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    font-size: 1.5em;
    font-weight: bold;
    color: #6c757d;
    z-index: 10;
    display: none;
  }
  
  .game-paused-overlay.visible {
    display: flex;
  }
  
  @media (max-width: 500px) {
    .game-container {
      padding: 20px;
    }
    
    .game-header h1 {
      font-size: 2em;
    }
    
    .cell {
      font-size: 1.2em;
    }
    
    .number-btn {
      padding: 12px;
      font-size: 1em;
    }
    
    .action-btn {
      padding: 10px 20px;
      font-size: 0.9em;
    }
    
    .game-info {
      flex-direction: column;
      align-items: stretch;
    }
    
    .timer-container {
      justify-content: center;
      margin-bottom: 10px;
    }
  }
</style>
</head>
<body>
  <div class="game-container">
    <div class="game-header">
      <h1>SUDOKU</h1>
      <p>Fill the grid so that every row, column, and box contains digits 1-9 exactly once</p>
    </div>

    <div class="game-info">
      <div class="timer-container">
        <div class="timer" id="timer">00:00</div>
        <button class="pause-btn" id="pause-btn">Pause</button>
      </div>
      <div class="difficulty">
        <button class="difficulty-btn active" data-difficulty="easy">Easy</button>
        <button class="difficulty-btn" data-difficulty="medium">Medium</button>
        <button class="difficulty-btn" data-difficulty="hard">Hard</button>
      </div>
    </div>

    <div class="sudoku-grid-container">
      <div class="sudoku-grid" id="sudoku-grid">
        <!-- Grid cells will be generated by JavaScript -->
      </div>
      <div class="game-paused-overlay" id="paused-overlay">
        Game Paused
      </div>
    </div>

    <div class="controls-section">
      <div class="number-pad">
        <button class="number-btn" data-number="1">1</button>
        <button class="number-btn" data-number="2">2</button>
        <button class="number-btn" data-number="3">3</button>
        <button class="number-btn" data-number="4">4</button>
        <button class="number-btn" data-number="5">5</button>
        <button class="number-btn" data-number="6">6</button>
        <button class="number-btn" data-number="7">7</button>
        <button class="number-btn" data-number="8">8</button>
        <button class="number-btn" data-number="9">9</button>
        <button class="number-btn clear" data-number="0">Clear</button>
      </div>
    </div>

    <div class="action-buttons">
      <button class="action-btn new-game" id="new-game">New Game</button>
      <button class="action-btn check" id="check-solution">Check</button>
    </div>

    <div class="message" id="message"></div>

    <div class="controls-guide">
      <strong>Controls:</strong> Click cells or use arrow keys • Numbers 1-9 • Backspace to clear • Pause to stop timer
    </div>
  </div>

<script>
class SudokuGame {
  constructor() {
    this.grid = Array(9).fill().map(() => Array(9).fill(0));
    this.solution = Array(9).fill().map(() => Array(9).fill(0));
    this.userGrid = Array(9).fill().map(() => Array(9).fill(0));
    this.selectedCell = null;
    this.startTime = null;
    this.timerInterval = null;
    this.secondsElapsed = 0;
    this.difficulty = 'easy';
    this.isPaused = false;

    this.init();
  }

  init() {
    this.createGrid();
    this.bindEvents();
    this.startNewGame();
  }

  createGrid() {
    const gridElement = document.getElementById('sudoku-grid');
    gridElement.innerHTML = '';
    
    for (let row = 0; row < 9; row++) {
      for (let col = 0; col < 9; col++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.dataset.row = row;
        cell.dataset.col = col;
        cell.textContent = '';
        gridElement.appendChild(cell);
      }
    }
  }

  bindEvents() {
    // Cell selection
    document.getElementById('sudoku-grid').addEventListener('click', (e) => {
      if (this.isPaused) return;
      const cell = e.target.closest('.cell');
      if (!cell) return;
      
      this.selectCell(parseInt(cell.dataset.row), parseInt(cell.dataset.col));
    });

    // Number input
    document.querySelectorAll('.number-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        if (this.isPaused || !this.selectedCell) return;
        
        const number = parseInt(btn.dataset.number);
        if (number === 0) {
          this.clearCell();
        } else {
          this.placeNumber(number);
        }
      });
    });

    // Keyboard input
    document.addEventListener('keydown', (e) => {
      if (this.isPaused) return;
      
      if (e.key >= '1' && e.key <= '9') {
        this.placeNumber(parseInt(e.key));
      } else if (e.key === 'Backspace' || e.key === 'Delete' || e.key === '0') {
        this.clearCell();
      } else if (e.key === 'ArrowUp') {
        this.navigate('up');
      } else if (e.key === 'ArrowDown') {
        this.navigate('down');
      } else if (e.key === 'ArrowLeft') {
        this.navigate('left');
      } else if (e.key === 'ArrowRight') {
        this.navigate('right');
      }
    });

    // Difficulty buttons
    document.querySelectorAll('.difficulty-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        this.difficulty = btn.dataset.difficulty;
        this.startNewGame();
      });
    });

    // New game button
    document.getElementById('new-game').addEventListener('click', () => {
      this.startNewGame();
    });

    // Check solution button
    document.getElementById('check-solution').addEventListener('click', () => {
      if (this.isPaused) return;
      this.checkSolution();
    });

    // Pause button
    document.getElementById('pause-btn').addEventListener('click', () => {
      this.togglePause();
    });
  }

  togglePause() {
    this.isPaused = !this.isPaused;
    const pauseBtn = document.getElementById('pause-btn');
    const timer = document.getElementById('timer');
    const overlay = document.getElementById('paused-overlay');
    
    if (this.isPaused) {
      this.stopTimer();
      pauseBtn.textContent = 'Resume';
      pauseBtn.classList.add('paused');
      timer.classList.add('paused');
      overlay.classList.add('visible');
    } else {
      this.startTimer();
      pauseBtn.textContent = 'Pause';
      pauseBtn.classList.remove('paused');
      timer.classList.remove('paused');
      overlay.classList.remove('visible');
    }
  }

  selectCell(row, col) {
    // Deselect previous cell
    if (this.selectedCell) {
      const prevCell = document.querySelector(`[data-row="${this.selectedCell.row}"][data-col="${this.selectedCell.col}"]`);
      prevCell.classList.remove('selected');
    }

    this.selectedCell = { row, col };
    const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
    cell.classList.add('selected');
    this.highlightRelatedCells(row, col);
  }

  highlightRelatedCells(row, col) {
    // Remove highlights from all cells
    const cells = document.querySelectorAll('.cell');
    cells.forEach(cell => cell.classList.remove('highlighted'));
    
    // Highlight row
    for (let c = 0; c < 9; c++) {
      const cell = document.querySelector(`[data-row="${row}"][data-col="${c}"]`);
      if (cell) cell.classList.add('highlighted');
    }
    
    // Highlight column
    for (let r = 0; r < 9; r++) {
      const cell = document.querySelector(`[data-row="${r}"][data-col="${col}"]`);
      if (cell) cell.classList.add('highlighted');
    }
    
    // Highlight 3x3 box
    const boxRow = Math.floor(row / 3) * 3;
    const boxCol = Math.floor(col / 3) * 3;
    for (let r = boxRow; r < boxRow + 3; r++) {
      for (let c = boxCol; c < boxCol + 3; c++) {
        const cell = document.querySelector(`[data-row="${r}"][data-col="${c}"]`);
        if (cell) cell.classList.add('highlighted');
      }
    }
  }

  navigate(direction) {
    if (!this.selectedCell) {
      // Select first empty cell
      for (let r = 0; r < 9; r++) {
        for (let c = 0; c < 9; c++) {
          if (this.grid[r][c] === 0) {
            this.selectCell(r, c);
            return;
          }
        }
      }
      return;
    }

    let { row, col } = this.selectedCell;
    
    switch(direction) {
      case 'up': row = Math.max(0, row - 1); break;
      case 'down': row = Math.min(8, row + 1); break;
      case 'left': col = Math.max(0, col - 1); break;
      case 'right': col = Math.min(8, col + 1); break;
    }
    
    this.selectCell(row, col);
  }

  placeNumber(number) {
    if (!this.selectedCell || this.grid[this.selectedCell.row][this.selectedCell.col] !== 0) {
      return;
    }

    const { row, col } = this.selectedCell;
    this.userGrid[row][col] = number;
    
    const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
    cell.textContent = number;
    cell.classList.add('user-input');
    cell.classList.remove('error-dot');
  }

  clearCell() {
    if (!this.selectedCell || this.grid[this.selectedCell.row][this.selectedCell.col] !== 0) {
      return;
    }

    const { row, col } = this.selectedCell;
    this.userGrid[row][col] = 0;
    
    const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
    cell.textContent = '';
    cell.classList.remove('user-input', 'error-dot');
  }

  startNewGame() {
    this.stopTimer();
    this.isPaused = false;
    document.getElementById('pause-btn').textContent = 'Pause';
    document.getElementById('pause-btn').classList.remove('paused');
    document.getElementById('timer').classList.remove('paused');
    document.getElementById('paused-overlay').classList.remove('visible');
    
    this.resetGame();
    this.generateSudoku();
    this.displayGrid();
    this.startTimer();
    this.showMessage('New game started! Good luck!', 'success');
  }

  resetGame() {
    this.grid = Array(9).fill().map(() => Array(9).fill(0));
    this.userGrid = Array(9).fill().map(() => Array(9).fill(0));
    this.selectedCell = null;
    this.secondsElapsed = 0;
  }

  generateSudoku() {
    // Predefined puzzles for simplicity
    const puzzles = {
      easy: {
        puzzle: '530070000600195000098000060800060003400803001700020006060000280000419005000080079',
        solution: '534678912672195348198342567859761423426853791713924856961537284287419635345286179'
      },
      medium: {
        puzzle: '000260701680070090190004500820100040004602900050003028009300074040050036703018000',
        solution: '435269781682571493197834562826195347374682915951743628519326874248957136763418259'
      },
      hard: {
        puzzle: '005300000800000020070010500400005300010070006003200080060500009004000030000009700',
        solution: '145327698839654127672918543496185372218473956753296481367542819984761235521839764'
      }
    };

    const puzzle = puzzles[this.difficulty];
    let index = 0;
    
    for (let row = 0; row < 9; row++) {
      for (let col = 0; col < 9; col++) {
        this.grid[row][col] = parseInt(puzzle.puzzle[index]);
        this.solution[row][col] = parseInt(puzzle.solution[index]);
        index++;
      }
    }
  }

  displayGrid() {
    const cells = document.querySelectorAll('.cell');
    let index = 0;
    
    for (let row = 0; row < 9; row++) {
      for (let col = 0; col < 9; col++) {
        const val = this.grid[row][col];
        const cell = cells[index++];
        cell.textContent = val === 0 ? '' : val;
        cell.className = 'cell';
        
        if (val !== 0) {
          cell.classList.add('fixed');
        }
      }
    }
  }

  startTimer() {
    this.stopTimer();
    this.startTime = Date.now() - this.secondsElapsed * 1000;
    
    this.timerInterval = setInterval(() => {
      if (!this.isPaused) {
        this.secondsElapsed = Math.floor((Date.now() - this.startTime) / 1000);
        const minutes = Math.floor(this.secondsElapsed / 60).toString().padStart(2, '0');
        const seconds = (this.secondsElapsed % 60).toString().padStart(2, '0');
        document.getElementById('timer').textContent = `${minutes}:${seconds}`;
      }
    }, 1000);
  }

  stopTimer() {
    if (this.timerInterval) {
      clearInterval(this.timerInterval);
      this.timerInterval = null;
    }
  }

  checkSolution() {
    let isComplete = true;
    let hasErrors = false;
    
    const cells = document.querySelectorAll('.cell');
    let index = 0;
    
    for (let row = 0; row < 9; row++) {
      for (let col = 0; col < 9; col++) {
        const userVal = this.userGrid[row][col];
        const correctVal = this.solution[row][col];
        const cell = cells[index++];
        
        if (userVal === 0) {
          isComplete = false;
          cell.classList.remove('error-dot');
        } else if (userVal !== correctVal) {
          hasErrors = true;
          cell.classList.add('error-dot');
        } else {
          cell.classList.remove('error-dot');
        }
      }
    }
    
    if (isComplete && !hasErrors) {
      this.showMessage('Congratulations! Puzzle solved correctly!', 'success');
      this.stopTimer();
    } else if (hasErrors) {
      this.showMessage('There are errors in your solution.', 'error');
    } else {
      this.showMessage('Keep going! Puzzle not complete yet.', 'error');
    }
  }

  showMessage(message, type) {
    const messageElement = document.getElementById('message');
    messageElement.textContent = message;
    messageElement.className = 'message';
    if (type) {
      messageElement.classList.add(type);
    }
  }
}

// Initialize the game when the page loads
document.addEventListener('DOMContentLoaded', () => {
  new SudokuGame();
});
</script>
</body>
</html>
